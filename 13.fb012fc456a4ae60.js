"use strict";(self.webpackChunksighisoara_festival=self.webpackChunksighisoara_festival||[]).push([[13],{3013:(M,p,a)=>{a.r(p),a.d(p,{FestivalsModule:()=>N});var o=a(9808),u=a(520),c=a(1223),d=a(9722),r=a(2466),m=a(3729),v=a(325),g=a(7545),t=a(5e3),f=a(2340);let h=(()=>{class s{constructor(e){this.http=e}getFestivals(){return this.http.get(`${f.N.backEndUrl}/festivals`)}getFestival(e){return this.http.get(`${f.N.backEndUrl}/festivals/${e}`)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(u.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function F(s,i){if(1&s&&(t.TgZ(0,"div")(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA()()),2&s){const e=i.ngIf;t.xp6(2),t.Oqu(e.festivalName),t.xp6(2),t.Oqu(e.description)}}let C=(()=>{class s{constructor(e,n,l){this.translate=e,this.festivalsService=n,this.activatedRoute=l}ngOnInit(){this.festivalData$=this.activatedRoute.params.pipe((0,g.w)(e=>this.festivalsService.getFestival(e.id)))}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.sK),t.Y36(h),t.Y36(v.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-festival-details"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,n){1&e&&(t.YNc(0,F,5,2,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.festivalData$))},directives:[o.O5],pipes:[o.Ov],styles:[""]}),s})();var T=a(2986),y=a(537),S=a(6201),L=a(6709),A=a(2925);function x(s,i){if(1&s&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function D(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",2)(2,"mat-label"),t._uU(3,"Select year"),t.qZA(),t.TgZ(4,"mat-select",3,4),t.NdJ("valueChange",function(){t.CHM(e);const l=t.MAs(5);return t.oxw().updateList(l.value)}),t.YNc(6,x,2,2,"mat-option",5),t.qZA()(),t.TgZ(7,"app-table",6),t.NdJ("openTableItem",function(l){return t.CHM(e),t.oxw().openFestival(l)}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(4),t.Q6J("value",e.defaultYear),t.xp6(2),t.Q6J("ngForOf",e.years),t.xp6(1),t.Q6J("displayedColumns",e.displayedColumns)("dataSource",e.dataSource)}}function I(s,i){1&s&&t._UZ(0,"app-spinner")}const Z=[{path:"",component:(()=>{class s{constructor(e,n,l){this.translate=e,this.festivalsService=n,this.router=l,this.isLoading=!0,this.displayedColumns=[{name:"festivalName",title:"FESTIVAL.NAME",sortable:!0},{name:"startDate",title:"FESTIVAL.START_DATE",sortable:!0},{name:"endDate",title:"FESTIVAL.END_DATE",sortable:!0}],this.years=[],this.defaultYear="",this.dataSource=[]}ngOnInit(){this.festivalsService.getFestivals().pipe((0,T.q)(1),(0,y.x)(()=>setTimeout(()=>this.isLoading=!1,500))).subscribe(e=>{this.allDataSources=e,this.years=Object.keys(e),this.years.length&&(this.defaultYear=this.years[0],this.updateList(this.defaultYear))})}updateList(e){this.allDataSources&&this.allDataSources[e]&&(this.dataSource=this.allDataSources[e])}openFestival(e){this.router.navigate([`${this.router.url}/festival-details/${e}`])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.sK),t.Y36(h),t.Y36(v.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-festival-list"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfElse"],["spinner",""],["appearance","outline"],[3,"value","valueChange"],["choosedValue",""],[3,"value",4,"ngFor","ngForOf"],[3,"displayedColumns","dataSource","openTableItem"],[3,"value"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h1"),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,D,8,4,"div",0),t.YNc(4,I,1,0,"ng-template",null,1,t.W1O)),2&e){const l=t.MAs(5);t.xp6(1),t.Oqu(t.lcZ(2,3,"FESTIVALS_PAGE")),t.xp6(2),t.Q6J("ngIf",!n.isLoading)("ngIfElse",l)}},directives:[o.O5,c.KE,c.hX,d.gD,o.sg,S.ey,L.a,A.O],pipes:[r.X$],styles:["mat-form-field[_ngcontent-%COMP%]{margin-right:10px;width:200px}"]}),s})()},{path:"festival-details/:id",component:C}];let E=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[v.Bz.forChild(Z)],v.Bz]}),s})(),N=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[o.ez,E,c.lN,d.LD,m.m,r.aw.forChild({loader:{provide:r.aw,useFactory:m.s,deps:[u.eN]}})]]}),s})()}}]);